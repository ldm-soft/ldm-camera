(this.webpackJsonphandpose=this.webpackJsonphandpose||[]).push([[0],{250:function(e,t,n){e.exports=n.p+"static/media/transport.56531d97.mp3"},251:function(e,t,n){e.exports=n.p+"static/media/person.d5b99dce.mp3"},252:function(e,t,n){e.exports=n.p+"static/media/persontransport.ac45c07b.mp3"},253:function(e,t,n){e.exports=n.p+"static/media/warningtransport.3eb6bd7b.mp3"},254:function(e,t,n){e.exports=n.p+"static/media/warningperson.66ba4ddf.mp3"},256:function(e,t,n){e.exports=n(285)},261:function(e,t,n){},267:function(e,t){},268:function(e,t){},276:function(e,t){},279:function(e,t){},280:function(e,t){},281:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t);var a=n(40),r=n.n(a),c=n(227),i=n.n(c),o=(n(261),n(5)),s=n.n(o),u=n(12),l=n(8),f=(n(284),n(255)),m=n(246),d=n.n(m),p=(n(281),function(e,t){e.forEach((function(e,n){var a=Object(l.a)(e.bbox,4),r=a[0],c=a[1],i=a[2],o=a[3],s="";switch(e.class){case"person":s="Con ng\u01b0\u1eddi";break;case"bicycle":s="Xe \u0111\u1ea1p";break;case"car":s="\xd4t\xf4";break;case"motorcycle":s="Xe m\xe1y"}var u="[".concat(s,"]"),f=Math.floor(16777215*Math.random()).toString(16);t.strokeStyle="#"+f,t.font="18px Arial",t.beginPath(),t.fillStyle="#"+f,t.fillText(u,r,c),t.rect(r,c,i,o),t.stroke()}))}),h=n(247),v=n(250),g=n.n(v),b=n(251),x=n.n(b),w=n(252),O=n.n(w),j=n(253),E=n.n(j),y=n(254),k=n.n(y);var S=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(0),c=Object(l.a)(n,2),i=c[0],o=c[1],m=Object(a.useState)(0),v=Object(l.a)(m,2),b=v[0],w=v[1],j={maxTransport:0,maxPersion:0},y=[{fromTime:"06:40",toTime:"07:10",maxTransport:20,maxPersion:20},{fromTime:"16:30",toTime:"16:50",maxTransport:20,maxPersion:20}],S=Object(a.useState)(j.maxPersion),T=Object(l.a)(S,2),D=T[0],A=T[1],P=Object(a.useState)(j.maxTransport),C=Object(l.a)(P,2),I=C[0],N=C[1],M=new Audio(g.a),R=new Audio(x.a),H=new Audio(O.a),L=new Audio(E.a),z=new Audio(k.a),B=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a();case 2:t=e.sent,console.log("Handpose model loaded."),setInterval((function(){U(t)}),10);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=!0,X=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J){e.next=7;break}return J=!1,e.next=4,t.play();case 4:return e.next=6,F(1e4);case 6:J=!0;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){return new Promise((function(t){return setTimeout(t,e)}))},U=function(){var n=Object(u.a)(s.a.mark((function n(a){var r,c,i,u,l,f,m,d;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"===typeof e.current||null===e.current||4!==e.current.video.readyState){n.next=20;break}return r=e.current.video,c=e.current.video.videoWidth,i=e.current.video.videoHeight,e.current.video.width=c,e.current.video.height=i,t.current.width=c,t.current.height=i,n.next=10,a.detect(r,1e3);case 10:u=n.sent,l=[],f=0,m=0,Object.values(u).forEach((function(e){"person"!==e.class&&"bicycle"!==e.class&&"car"!==e.class&&"motorcycle"!==e.class||("person"===e.class?f++:m++,l.push(e))})),o(f),w(m),d=t.current.getContext("2d"),p(l,d),V(f,m);case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),W=0,q=null,G=0,K=null,Q=function(e){return e.getMinutes()+60*e.getHours()};function V(e,t){!function(){var e=new Date,t=y.findIndex((function(t){return Q(e)>=Q(new Date("".concat(e.toDateString()," ").concat(t.fromTime)))&&Q(e)<=Q(new Date("".concat(e.toDateString()," ").concat(t.toTime)))})),n=-1!==t?y[t]:j;A(n.maxPersion),N(n.maxTransport)}(),J&&(function(e,t){var n=new Date;if(t>I){if(W>=5)return X(L),W=0,q=null,!0;null==q||n-q<2e4?W++:(W=0,q=null),q=n}if(e>D){if(G>=5)return X(z),G=0,K=null,!0;null==K||n-K<2e4?G++:(G=0,K=null),K=n}return!1}(e,t)||(e>D&&t>I?X(H):e>D?X(R):t>I&&X(M)))}Object(a.useEffect)((function(){B()}),[]),Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){!function(){var e;(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.enumerateDevices)?navigator.mediaDevices.enumerateDevices().then((function(e){var t=[];e.forEach((function(e){"videoinput"===e.kind&&t.push(e)})),ae(t),_(e[ie].deviceId)})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))})):console.log("enumerateDevices() kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3.")}()}))}),[]);var Y=r.a.useState({}),Z=Object(l.a)(Y,2),$=Z[0],_=Z[1],ee=r.a.useState([]),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=r.a.useState(0),ce=Object(l.a)(re,2),ie=ce[0],oe=ce[1];return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,"LDM SOFT"),r.a.createElement("meta",{name:"description",content:"camera-ai"}),r.a.createElement("link",{rel:"icon",type:"image/png",href:"./icon/logo.png"})),r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"camera-info"},"Camera: ",ie+1," of ",ne.length),r.a.createElement("div",{className:"person ".concat(i>D?"alert-red":"")},"S\u1ed1 ng\u01b0\u1eddi: ",i),r.a.createElement("div",{className:"transport ".concat(b>I?"alert-red":"")},"Ph\u01b0\u01a1ng ti\u1ec7n: ",b),ne.length>1&&r.a.createElement("button",{className:"devicesButton",onClick:function(){var e=ie;ie<ne.length-1?e++:e=0,oe(e),_(ne[e].deviceId)}},"Change Camera"),r.a.createElement(d.a,{ref:e,muted:!0,videoConstraints:{deviceId:$},style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:"100%",height:"100%"}}),r.a.createElement("canvas",{ref:t,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:8,width:"100%",height:"100%"}})))};i.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.24d2b126.chunk.js.map